<%= render_cell(
  :page_title,
  :show,
  data:
  {
    name: t('navigation.page_project_time_sheet'),
  }
)
%>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
      <div class="btn-toolbar">
        <%= render_cell(
          :dropdown_button,
          :show,
          data:
          {
            name: @project.nil? ? "#{t('label.please_choose')}#{Project.model_name.human}" : @project.name,
            url: nil,
            dropdown_list:
            [
              {
                name: "All projects",
                url: project_time_sheet_path(@url_params.reject{|k,v| k == :project_id})
              },
              {
                divider: true
              },
              Project.top.inject([]) {|list, project| list << {
                  name: project.name,
                  url: project_time_sheet_path(@url_params.merge({project_id: project.id}))
                }
              }
            ].flatten
          }
        ) %>
        <div class="btn-group">
        <%= link_to t('activerecord.attributes.time_sheet.duration.all'), project_time_sheet_path(@url_params.merge({duration: :all})), class: "btn #{@report_duration == :all ? 'active' : ''}" %>
          <%= link_to t('activerecord.attributes.time_sheet.duration.year'), project_time_sheet_path(@url_params.merge({duration: :year})), class: "btn #{@report_duration == :year ? 'active' : ''}" %>
          <%= link_to t('activerecord.attributes.time_sheet.duration.month'), project_time_sheet_path(@url_params.merge({duration: :month})), class: "btn #{@report_duration == :month ? 'active' : ''}" %>
          <%= link_to t('activerecord.attributes.time_sheet.duration.week'), project_time_sheet_path(@url_params.merge({duration: :week})), class: "btn #{@report_duration == :week ? 'active' : ''}" %>
        </div>
      </div>
    </div>
  </div>
</div>

<%= render partial: 'project_time_sheet_grid' %>